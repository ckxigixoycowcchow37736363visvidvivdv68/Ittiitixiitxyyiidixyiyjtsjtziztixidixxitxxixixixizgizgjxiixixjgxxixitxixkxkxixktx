<!DOCTYPE html>
<html>
<head>
    <title>Clash of Clans Player Search</title>
</head>
<body>
    <h2>Search Clash of Clans Player</h2>
    <input type="text" id="playerTag" placeholder="Enter Player Tag (e.g. #ABC123)">
    <button onclick="getPlayerInfo()">Search</button>
    <div id="result"></div>

    <script>
        async function getPlayerInfo() {
            let playerTag = document.getElementById('playerTag').value.trim();
            if (!playerTag.startsWith("#")) {
                alert("Player tag must start with #");
                return;
            }
            playerTag = encodeURIComponent(playerTag);

            const apiKey = "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiIsImtpZCI6IjI4YTMxOGY3LTAwMDAtYTFlYi03ZmExLTJjNzQzM2M2Y2NhNSJ9.eyJpc3MiOiJzdXBlcmNlbGwiLCJhdWQiOiJzdXBlcmNlbGw6Z2FtZWFwaSIsImp0aSI6IjEwOWJhZWZiLTBlMzctNDQ4YS05N2Q1LTQ4NTkzYzhkNTE1NyIsImlhdCI6MTc0MTUwMDE5MCwic3ViIjoiZGV2ZWxvcGVyL2IyYThlOWUwLWExMjktNDZhOS00MGFiLTAzZGYzMTVjYmMyNyIsInNjb3BlcyI6WyJjbGFzaCJdLCJsaW1pdHMiOlt7InRpZXIiOiJkZXZlbG9wZXIvc2lsdmVyIiwidHlwZSI6InRocm90dGxpbmcifSx7ImNpZHJzIjpbIjE4NS4xOTkuMTA4LjE1MyJdLCJ0eXBlIjoiY2xpZW50In1dfQ.ATtS9scTXiiwjun_1Dx8PYURTOMCIuK5tJa7gKZ351cuU4zRGqQB7RMKTcMh8UNn5HjAdyXksmj9F64JWEonvw"; // Replace with your API Key
            const apiUrl = `https://api.clashofclans.com/v1/players/${playerTag}`;

            try {
                const response = await fetch(apiUrl, {
                    headers: {
                        "Authorization": `Bearer ${apiKey}`,
                        "Accept": "application/json"
                    }
                });

                if (!response.ok) {
                    throw new Error(`Error: ${response.status}`);
                }

                const data = await response.json();
                document.getElementById("result").innerHTML = `
                    <h3>${data.name} (${data.tag})</h3>
                    <p>Town Hall Level: ${data.townHallLevel}</p>
                    <p>Trophies: ${data.trophies}</p>
                    <p>Clan: ${data.clan ? data.clan.name : "No Clan"}</p>
                `;
            } catch (error) {
                document.getElementById("result").innerHTML = `<p style="color: red;">${error.message}</p>`;
            }
        }
    </script>
</body>
</html>